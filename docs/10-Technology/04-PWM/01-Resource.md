### S7-1200 PWM 功能

S7-1200
PLC与其他西门子的PLC类似，也具有PWM功能。可以为用户提供占空比可调的脉冲输出串。

:::{attention}
用户在使用PWM功能时，务必确认采用DC/DC/DC类型的CPU，继电器输出类型的S7-1200 CPU本体DO不能使用PWM功能（可以通过扩展SB信号板来实现PWM功能）。由于继电器的机械特性，在输出频率较快的脉冲时会影响继电器的寿命。
:::

### S7-1200 PWM 资源

目前S7-1200 PLC最多有4个PWM的资源。

不同固件版本的S7-1200
PLC可以支持的PWM个数不同，除此之外，每个PWM的DO点分配的情况也不同。如下表1所示：

表1 S7-1200 PLC PWM资源

  -------------- ----------- --------------------- -------------------- ------------------------- --------------------- -------------------- ------------------------- --------------------- -------------------- -------------------------
                             **PWM的总资源数量**   CPU本体上的PWM数量   添加SB卡后的最大PWM数量   **PWM的总资源数量**   CPU本体上的PWM数量   添加SB卡后的最大PWM数量   **PWM的总资源数量**   CPU本体上的PWM数量   添加SB卡后的最大PWM数量

                             **固件:\                                                             **固件:\                                                             **固件:\                                   
                             V1.0/2.0/2.1/2.2**                                                   V3.0**                                                               V4.0以上**                                 

  **CPU1211C**   DC/DC/DC    **2**                 2                    2                         **4**                 2                    4                         **4**                 4                    4

                 DC/DC/Rly                         0                    2                                               0                    4                                               0                    4

                 AC/DC/Rly                                                                                                                                                                                        

  **CPU1212C**   DC/DC/DC    **2**                 2                    2                         **4**                 3                    4                         **4**                 4                    4

                 DC/DC/Rly                         0                    2                                               0                    4                                               0                    4

                 AC/DC/Rly                                                                                                                                                                                        

  **CPU1214C**   DC/DC/DC    **2**                 2                    2                         **4**                 4                    4                         **4**                 4                    4

                 DC/DC/Rly                         0                    2                                               0                    4                                               0                    4

                 AC/DC/Rly                                                                                                                                                                                        

  **CPU1215C**   DC/DC/DC    \-                                                                   **4**                 4                    4                         **4**                 4                    4

                 DC/DC/Rly                                                                                              0                    4                                               0                    4

                 AC/DC/Rly                                                                                                                                                                                        

  **CPU1217C**   DC/DC/DC    \-                                                                   \-                                                                   **4**                 4                    4
  -------------- ----------- --------------------- -------------------- ------------------------- --------------------- -------------------- ------------------------- --------------------- -------------------- -------------------------

从上表1
中可以看出，添加SB信号板并不会超过CPU的总资源限制数。对于DC/DC/DC类型的CPU来说，添加信号板可以把PWM的功能移到信号板上，CPU本体上的DO点可以空闲出来作为其他功能。而对于Rly
类型的CPU来说如果需要使用PWM功能，则必须添加相应型号的SB信号板。

下表2 列出了S7-1200 PLC可以用来组态PWM功能的SB信号板的具体信息。

表2 1200PLC SB信号板信息

  ------------------ ---------------------- --------------------- -------------- -------------------------
  **SB信号板类型**                          **订货号**            **脉冲频率**   **高速脉冲输出点个数**
  DO                 4 x 24 V DC            6ES7 222-1BD30-0XB0   200 kHz        可提供4个高速脉冲输出点
                     4 x 5 V DC             6ES7 222-1AD30-0XB0                  
  DI/DO              2DI / DQ 2 x 24 V DC   6ES7 223-3BD30-0XB0                  可提供2个高速脉冲输出点
                     2DI / DQ 2 x 5 V DC    6ES7 223-3AD30-0XB0                  
                     2DI / DQ 2 x 24 V DC   6ES7 223-0BD30-0XB0   30 kHz         
  ------------------ ---------------------- --------------------- -------------- -------------------------

:::{attention}
上表2 中的5V信号都是集电极开路信号，不是5V差分信号。
如果需要输出5V差分输出信号，可考虑使用CPU1217
DC/DC/DC本体特定的差分输出点。
:::
**DC/DC/DC**类型的S7-1200
CPU的**本体上**的DO点可组态成PWM的资源情况如下所示。

#### **CPU1211C (DC/DC/DC)** **本体上**的DO点可组态成PWM的资源情况

表3 CPU1211C (DC/DC/DC) 本体DO点PWM的资源情况

  ------------------------- ---------------------------------------------------- ---------- ---------- ----------
  **CPU1211C (DC/DC/DC)**   **Q0.0**                                             **Q0.1**   **Q0.2**   **Q0.3**
  固件 V1.0                 PWM 0                                                \-         PWM 1      \-
                            100 kHz                                                         100 kHz    
  固件 V2.0/2.1/2.2         PWM 0                                                \-         PWM 1      \-
                            100 kHz                                                         100 kHz    
  固件 V3.0                 PWM 0                                                \-         PWM 1      \-
                            100 kHz                                                         100 kHz    
  固件 V4.0以上             用户灵活定义 PWM 0\~PWM 3 这 4 路PWM的DO点分配情况                         
                            100 kHz                                                                    
  ------------------------- ---------------------------------------------------- ---------- ---------- ----------

:::{attention}
固件 V3.0的CPU1211C最多可以有4个PWM资源，上表3
只是说明了DC/DC/DC CPU本体上的PWM资源和DO点分配情况。从上表3
可以看到由于固件
V3.0的CPU1211C本体只集成了4个DO点，根据PWM功能对DO点分配要求，固件
V3.0的CPU1211C本体最多只能组态2个PWM，如果需要更多的PWM，用户需要扩展SB信号板。
:::
#### **CPU1212C (DC/DC/DC) 本体上**的DO点可组态成PWM的资源情况

表4 CPU1212C (DC/DC/DC) 本体DO点PWM的资源情况

  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ----------
  **CPU1212C (DC/DC/DC)**   **Q0.0**                                             **Q0.1**   **Q0.2**   **Q0.3**   **Q0.4**   **Q0.5**
  固件 V1.0                 PWM 0                                                \-         PWM 1      \-                    
                            100 kHz                                                         100 kHz                          
  固件 V2.0/2.1/2.2         PWM 0                                                \-         PWM 1                            
                            100 kHz                                                         100 kHz                          
  固件 V3.0                 PWM 0                                                \-         PWM 1      \-         PWM 2      \-
                            100 kHz                                                         100 kHz               20 kHz     
  固件 V4.0以上             用户灵活定义 PWM 0\~PWM 3 这 4 路PWM的DO点分配情况                                               
                            100 kHz                                                                               20 kHz     
  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ----------

:::{attention}
跟固件 V3.0的CPU1211C一样，固件
V3.0的CPU1212C最多也可以有4个PWM资源。同样地，由于CPU1212C
DC/DC/DC本体只集成了6个DO点，根据PWM功能对DO点分配要求，CPU1212C本体上没有Q0.6，因此不能组态第4个PWM。同样地道理，用户如果需要4个PWM，则扩展SB信号板来实现。
:::

#### **CPU1214C (DC/DC/DC)** **本体上**的DO点可组态成PWM的资源情况

表5 CPU1214C (DC/DC/DC) 本体DO点PWM的资源情况

  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------
  **CPU1214C (DC/DC/DC)**   **Q0.0**                                             **Q0.1**   **Q0.2**   **Q0.3**   **Q0.4**   **Q0.5**   **Q0.6**   **Q0.7**   **Q1.0**   **Q1.1**
  固件 V1.0                 PWM 0                                                \-         PWM 1      \-                                                                
                            100 kHz                                                         100 kHz                                                                      
  固件 V2.0/2.1/2.2         PWM 0                                                \-         PWM 1                                                                        
                            100 kHz                                                         100 kHz                                                                      
  固件 V3.0                 PWM 0                                                \-         PWM 1      \-         PWM 2      \-         PWM 3      \-                    
                            100 kHz                                                         100 kHz               20 kHz                20 kHz                           
  固件 V4.0以上             用户灵活定义 PWM 0\~PWM 3 这 4 路PWM的DO点分配情况                                                                                           
                            100 kHz                                                                               20 kHz                                                 
  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------

#### **CPU1215C (DC/DC/DC)** **本体上**的DO点可组态成PWM的资源情况

表6 CPU1215C (DC/DC/DC) 本体DO点PWM的资源情况

  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------
  **CPU1215C (DC/DC/DC)**   **Q0.0**                                             **Q0.1**   **Q0.2**   **Q0.3**   **Q0.4**   **Q0.5**   **Q0.6**   **Q0.7**   **Q1.0**   **Q1.1**
  固件 V3.0                 PWM 0                                                \-         PWM 1      \-         PWM 2      \-         PWM 3      \-                    
                            100 kHz                                                         100 kHz               20 kHz                20 kHz                           
  固件 V4.0以上             用户灵活定义 PWM 0\~PWM 3 这 4 路PWM的DO点分配情况                                                                                           
                            100 kHz                                                                               20 kHz                                                 
  ------------------------- ---------------------------------------------------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ---------- ----------

#### **CPU1217C (DC/DC/DC)** **本体上**的DO点可组态成PWM的资源情况

表7 CPU1217C (DC/DC/DC) 本体DO点PWM的资源情况

  ------------------------- ---------------------------------------------------- ---- ---------- ---- ---------- ---- ---------- ---- ------------------------- ---------- ---------- ---------- ---------- ----------
  **CPU1217C (DC/DC/DC)**   **Q0.0**                                                  **Q0.1**        **Q0.2**        **Q0.3**        **Q0.4**                  **Q0.5**   **Q0.6**   **Q0.7**   **Q1.0**   **Q1.1**
                            \+                                                   \-   \+         \-   \+         \-   \+         \-                                                                         
  固件 V4.0以上             差分信号                                                                                                  集电极开路 24V 源型信号                                               
                            用户灵活定义 PWM 0\~PWM 3 这 4 路PWM的DO点分配情况                                                                                                                              
                            1 MHz                                                                                                     100 kHz                                                               
  ------------------------- ---------------------------------------------------- ---- ---------- ---- ---------- ---- ---------- ---- ------------------------- ---------- ---------- ---------- ---------- ----------

:::{attention}
从上面这些表格可以看到，不同的DO点其脉冲输出频率也不尽相同，请客户务必确认其输出频率能否满足工艺要求。
:::