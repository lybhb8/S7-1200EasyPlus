<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>S7-1200</title>
<link href="mnp.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h3><span class="STYLE1">S7-1200 和 S7-1200 之间 ISO on TCP 通信</span></h3>
<h4>ISO on TCP 协议通信的连接配置</h4>
<p>  使用ISO on TCP 协议通信，除了连接参数的定义不同，其它组态编程与 TCP 协议通信完全相同，见<span class="STYLE3"><a href="../../03-TCP/02-S7-1200/01-S7-1200.htm">S7-1200 和 S7-1200 之间 TCP 通信</a></span>。<br />
  S7-1200 CPU中，使用ISO on TCP协议通信时，PLC_1的连接参数如图1所示。通信伙伴PLC_2的连接参数，如图2所示。<br />
  <img src="images/1-01.gif" width="495" height="494" />  <br />
  <br />
  图1. PLC_1的ISO on TCP协议通信连接参数<br />
  <br />
  <img src="images/1-02.gif" width="500" height="493" />  <br />
图2.  PLC_2的ISO on TCP协议通信连接参数</p>
<h4>ISO on TCP 动态长度数据传输</h4>
<p>ISO on TCP协议支持动态长度的数据传输。创建接收和发送DB块，可是优化寻址方式或实际地址方式。<br />
  <br />
  <strong>1.通信数据区的定义</strong><br />
  <br />
发送方的数据块通信数据区定义为6个字节，如图3所示 </p>
<p><img src="images/1-03.gif" width="632" height="192" /><br />
  <br />
图3.发送方数据块通信数据区的定义</p>
<p>接收方的数据区也定义为6个字节，如图4. 所示</p>
<p><img src="images/1-04.gif" width="574" height="270" /></p>
<p>图4. 接收方数据块通信数据区的定义</p>
<p><strong>2. 编程</strong></p>
<p>发送方的程序如图5所示，“LEN”参数要定义成变量100。</p>
<p><img src="images/1-05.gif" width="485" height="305" /></p>
<p>图5. 发送方的编程</p>
<p>接收方的程序如图6所示，“LEN”参数赋一个常数“0”，以便实现动态数据长度传输。注意要创建符号寻址方式的DB块</p>
<p><img src="images/1-06.gif" width="440" height="399" /></p>
<p>图6. 接收方的编程</p>
<p><strong>动态长度数据传输：</strong><br />

<li>要实现动态长度数据传输，需要将接收方的数据长度设为0。</li>
  <li>如果发送方数据长度“TSENDC_LEN&quot;设为100，则传送100个字节给接收方；</li>

<br />
    监控结果：<br />
    <img src="images/1-07.GIF" width="1094" height="350" /></li>
<p>图7. 监控结果</p>
</body>
</html>
