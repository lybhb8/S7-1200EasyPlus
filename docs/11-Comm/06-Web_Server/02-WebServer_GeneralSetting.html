<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>Web 服务器通用配置</title>
<link href="mnp.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h3>Web 服务器通用配置</h3>
<p>TIA Portal 从 V17 版本开始、S7-1200 CPU 从 V4.5 版本开始，Web 服务器支持现代 API 和证书处理。并且在 Web 服务器属性中新增了 Security 属性，在其中设置安全通信所用的证书。在使用 TIA Portal V17 对 V4.5 版本的 S7-1200 组态 Web 服务器时，必须在 Security 属性中的证书类型进行选择，以使用不同的证书。</p>
<p>本文档将介绍如何配置及访问 S7-1200 的 Web 服务器功能。</p>
<h4>硬件和软件版本</h4>
<p>以下是本文档中所使用的硬件和软件：</p>
<p>硬件：S7-1200 V4.5 及以上 （本文档使用硬件： 6ES7214-1AG40-0XB0 V4.5 版本）</p>
<p>软件：TIA Portal V17 及以上（本文档使用软件：STEP7 Professional V17）</p>
<h4>S7-1200 组态配置 Web 服务器</h4>
<p>1. 添加S7-1200 CPU，选择 CPU 1214C DC/DC/DC V4.5 版本的 CPU，如图 1 所示。</p>
<p><img src="images/02-01.jpg" width="706" height="445" /></p>
<p>图 1.添加 CPU</p>
<p>2. 在弹出的安全设置向导中进行相关安全设置，如步骤 2.1~2.4 所示。</p>
<p><img src="images/4.gif" width="15" height="15" /> PLC安全设置向导是 V4.5 新增的设置，如果使用低版本，无此步骤。</p>
<blockquote>
  <p>2.1 点击&ldquo;保护机密的 PLC 数据&rdquo;，取消勾选&ldquo;保护 TIA Portal 项目和 PLC 中的 PLC 组态数据安全&rdquo;，如图 2 所示。如实际需要，可以保留勾选项。</p>
</blockquote>
<p><img src="images/02-02.jpg" width="788" height="677" /></p>
<p>图 2.设置保护机密的 PLC 数据</p>
<blockquote>
  <p>2.2 点击 &ldquo;PG/PC 和 HMI 的通信模式&rdquo;，取消勾选&ldquo;仅支持 PG/PC 和 HMI 安全通信&rdquo;，如图 3 所示。如实际需要，可以保留勾选项。</p>
</blockquote>
<p><img src="images/02-03.jpg" width="788" height="681" /></p>
<p>图 3.设置 PG/PC 和 HMI 的通信模式</p>
<blockquote>
  <p>2.3 点击 &ldquo;PLC 访问保护&rdquo;，访问等级处选择&ldquo;完全访问权限（无任何保护）&rdquo;，如图 4 所示。如实际需要，可以设置所需的访问权限。</p>
</blockquote>
<p><img src="images/02-04.jpg" width="786" height="677" /></p>
<p>图 4.设置 PLC 访问保护</p>
<blockquote>
  <p>2.4 点击概览可以查看 PLC 安全设置的概览信息，如果确认无误，可以点击完成进行确认</p>
</blockquote>
<p><img src="images/02-05.jpg" width="788" height="680" /></p>
<p>图 5.对安全设置概览进行确认</p>
<p>3. CPU 属性中，选择以太网地址属性，设置 CPU 的 IP 地址，此处设置 IP 地址为：192.168.0.124，如图 6 所示。</p>
<p><img src="images/02-06.jpg" width="647" height="470" /></p>
<p>图 6.设置 CPU 的 IP 地址</p>
<p>4. 选择 CPU，在 CPU 属性中，选择 Web 服务器，勾选&ldquo;在此设备的所有模块上激活 Web 服务器&rdquo;，如图 7 所示。</p>
<p><img src="images/02-07.jpg" width="728" height="318" /></p>
<p>图 7.激活 Web 服务器</p>
<p><img src="images/4.gif" alt="" width="15" height="15" /><strong>注意</strong>：图 7 中，如果取消勾选 &ldquo;仅允许通过 HTTPS 访问&rdquo;，通过浏览器访问 Web 服务器时，可以通过 http://ww.xx.yy.zz 访问或者通过 https://ww.xx.yy.zz。为了防止 PLC 被恶意攻击，或者出现未经授权的操作，建议勾选&ldquo;仅允许通过 HTTPS 访问&rdquo;。</p>
<p>5. Web 服务器属性中，点击用户管理，默认用户为&ldquo;每个人&rdquo;，访问级别为最小权限，即：只能查看开始和简介两个标准的 Web 页面。</p>
<p>此处添加新用户，如图 8 所示。</p>
<p>用户名称：Admin</p>
<p>访问级别：管理员（设置管理员的方法如图 9 所示）</p>
<p>访问密码：123456</p>
<p><img src="images/02-08.jpg" width="725" height="320" /></p>
<p>图 8.添加新用户</p>
<p>在图 8 中，点击新增用户的访问级别这一列弹出 Web 服务器访问权限对话框，可以根据需要勾选响应的访问权限；如果要设置管理员访问权限，需要将所有复选框均勾选，如图 9 所示。</p>
<p><img src="images/02-09.jpg" width="509" height="540" /></p>
<p>图 9.设置管理员访问权限<br />
  <br />
  6. Web 服务器属性中，点击监控表，可从名称列下拉菜单中选择已经创建好的监控表或者强制表。可设置读取或者读/写的访问权限。如图 10 所示。</p>
<p><img src="images/4.gif" width="15" height="15" />此步骤如有需要再添加，非必须操作的步骤！</p>
<p><img src="images/02-10.jpg" width="735" height="247" /></p>
<p>图 10.选择监控表或强制表</p>
<p>例如本文档事先创建好&ldquo;监控表_1&rdquo;，并在其中添加变量，如图 11 所示。</p>
<p><img src="images/02-11.jpg" width="417" height="202" /></p>
<p>图 11.监控表</p>
<p>后续还需要进行安全设置，请参见<a href="03-WebServer_SecuritySetting.html">链接</a>。</p>

</body>
</html>
